# GraphQL

## Setup and Start

``` bash
npm install
npm start
```

### Query 
Аналог GET в REST. Запросы - строки, которые отправляются в теле HTTP POST-запроса. Все типы запросов в GraphQL отправляются через POST.

Получить age пользователя, который опубликовал пост с id 1:

```
{
  posts(id: 1) {
    body
    user {
      age
    }
  }
}
```

### Mutation 
Аналог POST и PUT в REST.

```
mutation createUser{
  addUser(fname: "Richie", age: 22) {
    id
  }
}
```

### Subscription 
Клиент слушает изменения в БД в режиме реального времени. Под капотом подписки используют вебсокеты.
Получать список пользователей с именами и количеством лайков каждый раз, когда оно меняется.

```
subscription listenLikes {
  listenLikes {
    fname
    likes
  }
}
```

Работа с сервером GraphQL начинается с разработки **Schema** из двух взаимосвязанных объектов: TypeDefs и Resolvers. Объект typeDef определяет список типов, которые доступны в проекте.
Если в поле указан восклицательный знак, оно становится обязательным.

Resolver или распознаватель - функция, возвращает данные для определённого поля, того типа, который определён в схеме.

Поле user в запросе определено в схеме - получать нужную информацию без использования endpoint’ов и повторных обращений к серверу.
